<div class="beacon-container">

    <form [formGroup]="beaconForm" (ngSubmit)="onSubmit()" class="padding" fxFlex='100' fxLayout="column" *ngIf="beacon">
        
        <fieldset [disabled]="beaconCreated || editMode">

            <div fxLayout="row">

                <div fxFlex="33">

                    <div fxLayout="row" fxLayoutAlign="space-between none">

                        <div class="beacon-form" fxLayout="column" fxFlex="75">

                            <!--handle multi beacon-->

                            <!--<md-input-container fxFlex="50">
                                <input
                                    mdInput
                                    type="text"
                                    placeholder="Beacon Name"
                                    #name
                                    formControlName="name">

                                <md-hint align="start">
                                    <div  *ngIf="!beaconForm.get('name').valid && !beaconForm.get('name').touched">
                                        Please add a Beacon Name
                                    </div>
                                </md-hint>
                            </md-input-container>-->

                            <md-input-container fxFlex="50">
                                <input
                                    mdInput
                                    type="text"
                                    placeholder="Beacon ID"
                                    formControlName="id"
                                    #id>

                                <md-hint align="start">
                                    <div   *ngIf="!beaconForm.get('id').valid && !beaconForm.get('id').touched">
                                        Please add a Beacon ID
                                    </div>
                                </md-hint>
                            </md-input-container>

                            <md-select 
                                fxFlex="50"
                                placeholder="Beacon Type"
                                formControlName="type"
                                #type>
                                    <md-option value="kontakt">
                                        Kontakt
                                    </md-option>
                                    <md-option value="gimble">
                                        Gimble
                                    </md-option>
                            </md-select>

                            <!--reverse geocoding -->

    <!--                    <div fxLayout="row" fxFlex="50">

                                <button
                                    type="button"
                                    md-button
                                    color="primary"
                                    fxFlex
                                    (click)="setCurrentPosition()">
                                    Find Current Location
                                </button>

                            </div>-->
                                <md-input-container fxFlex="50">
                                <input 
                                    placeholder="Beacon Location"
                                    mdInput
                                    formControlName="search"
                                    type="text"
                                    #search 
                                    [formControl]="searchControl">

                                    <md-hint align="start">
                                        <div  *ngIf="!beaconForm.get('search').valid && !beaconForm.get('search').touched">
                                            Please add a Beacon Location
                                        </div>
                                    </md-hint>
                                </md-input-container>

                                <md-input-container fxFlex="50">
                                    <input
                                        mdInput
                                        type="number"
                                        placeholder="Beacon Latitude"
                                        required
                                        formControlName="lat"
                                        #lat>

                                </md-input-container>

                                <md-input-container fxFlex="50">
                                    <input
                                        
                                        mdInput
                                        type="number"
                                        placeholder="Beacon Longitude"
                                        required
                                        formControlName="lng"
                                        #lng>

                                </md-input-container>
                    

                        </div>

                    </div>

                    <div fxLayout="row" fxLayoutAlign="center">
                        <button
                            type="submit"
                            [disabled]="!beaconForm.valid || beaconCreated" 
                            md-raised-button>
                            <md-icon>
                                add
                            </md-icon>
                            Add Beacon
                        </button>
                    </div>

                </div>

                <div fxFlex="67">

                        <div fxLayout="column" fxLayoutAlign="space-between center">

                            <!--spinner for current Position-->

                            <!--<div fxLayout="column" *ngIf="!currentPosition" fxLayoutAlign="center center">

                                <md-spinner ></md-spinner>
                                <h3>Locating...</h3>

                            </div>-->
                            

                            <agm-map [latitude]="latitude" [longitude]="longitude">

                                <agm-marker 
                                    *ngFor="let m of markers; let i = index" 
                                    [latitude]="m.lat"
                                    [longitude]="m.lng">
                                </agm-marker>

                            </agm-map>
             
                        </div>


                </div>

            </div>

        </fieldset>

    </form>

</div>

